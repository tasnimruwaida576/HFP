Corrección de errores y optimización